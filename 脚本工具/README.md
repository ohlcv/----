# 中国近现代史纲要综合分析脚本

## 📖 简介

这是一个用于分析《中国近现代史纲要》规划卡的综合分析工具，能够深入分析文档的结构、知识点分布、测试题统计等信息。

**版本**: 2.0（合并优化版）  
**支持格式**: TXT文件、PDF文件

## ✨ 主要功能

1. **文档基本信息分析**
   - 字符统计、页数统计
   - 文档结构分析

2. **知识点深度分析**
   - 知识点总数统计
   - 按重要程度分类（★ / ★★ / ★★★）
   - 按考核要求分类（单选/简答/论述）
   - 各章节详细分布

3. **测试题统计**
   - 真题/模拟题数量
   - 各章节题目分布
   - 答案和解析统计

4. **内容特征分析**
   - 知识点平均长度
   - 内容类型分布
   - 核心知识点列表

## 🚀 快速开始

### 基本使用

```bash
# 使用默认路径分析
python analyze_history_outline.py

# 指定TXT文件
python analyze_history_outline.py -f /path/to/file.txt

# 指定PDF文件
python analyze_history_outline.py -f /path/to/file.pdf
```

### 显示核心知识点

```bash
# 显示前100个核心知识点（★★★ 级别）
python analyze_history_outline.py -v
```

### 调试模式

```bash
# 显示前200个知识点的详细解析 + 核心知识点列表
python analyze_history_outline.py -d
```

### 组合使用

```bash
# 分析PDF文件并显示核心知识点
python analyze_history_outline.py -f document.pdf -v

# 分析并开启调试模式
python analyze_history_outline.py -f document.pdf -d
```

## 📊 输出报告说明

报告分为以下几个部分：

### 一、文档基本信息
- 总字符数和有效字数
- 文档页数范围

### 二、文档结构层次
- 章节总数
- 小节总数
- 知识点总数

### 三、知识点分布概况
- **重要程度分布**
  - ★★★ (核心考点): 最重要的知识点
  - ★★ (重要考点): 重要知识点
  - ★ (一般考点): 一般知识点
- **考核要求分布**
  - 单选题考点
  - 简答题考点
  - 论述题考点

### 四、各章节详细分析
每章包含：
- 知识点数量
- 小节数量
- 测试题数量
- 重要程度分布
- 考核要求分布

### 五、测试题统计
- 真题/模拟题比例
- 配套答案和解析数量

### 六、内容特征分析
- 知识点平均长度
- 内容类型分类（历史事件、人物思想、理论政策、历史意义）
- 文档特点总结

### 七、核心知识点列表（-v 或 -d 模式）
- 按章节分组显示所有 ★★★ 级别的核心知识点
- 默认显示前100个

## 🔧 依赖说明

### 基本依赖（TXT文件）
无需额外依赖，Python 3.6+ 即可运行

### PDF支持依赖
如需分析PDF文件，请安装以下库（**推荐安装pdfplumber，文本提取质量最好**）：

```bash
# 推荐：使用 pdfplumber（文本提取质量最好）
pip install pdfplumber --break-system-packages

# 备选1：使用 pypdf
pip install pypdf --break-system-packages

# 备选2：使用 PyPDF2
pip install PyPDF2 --break-system-packages
```

## 🔍 PDF问题诊断

如果PDF文件无法正确提取知识点，请使用诊断工具：

```bash
# 诊断PDF文本提取
python diagnose_pdf.py /path/to/file.pdf

# 或者在分析时保存提取的文本
python analyze_history_outline.py -f file.pdf --save-text extracted.txt -d
```

**常见PDF问题**：
1. **扫描版PDF** - 如果PDF是扫描件，需要先进行OCR处理
2. **文本提取不完整** - 尝试安装pdfplumber替代pypdf
3. **编码问题** - 某些特殊字符可能无法正确提取

## 📝 命令行参数

| 参数 | 简写 | 说明 | 默认值 |
|------|------|------|--------|
| `--file` | `-f` | 输入文件路径（支持.txt和.pdf） | 默认路径 |
| `--verbose` | `-v` | 显示核心知识点列表 | 关闭 |
| `--debug` | `-d` | 调试模式（前200个知识点详情+核心知识点） | 关闭 |
| `--save-text` | - | 保存提取的文本到指定文件（用于调试PDF） | 无 |
| `--help` | `-h` | 显示帮助信息 | - |

## 💡 使用技巧

1. **快速了解文档** - 直接运行不带参数的命令，查看总体概况
2. **重点复习** - 使用 `-v` 参数查看所有核心知识点（★★★）
3. **详细调试** - 使用 `-d` 参数查看每个知识点的解析情况
4. **PDF支持** - 可直接分析PDF格式的规划卡文件

## 🎯 核心概念

### 什么是核心知识点？
核心知识点是指重要程度标记为 **★★★** 的知识点，这些是考试的重点内容，需要重点掌握。

### 知识点重要程度
- **★★★** (核心考点) - 必须完全掌握，是考试重点
- **★★** (重要考点) - 需要熟练掌握
- **★** (一般考点) - 需要了解

### 考核要求类型
- **单选** - 选择题考点
- **简答** - 简答题考点
- **论述** - 论述题考点

## 📧 问题反馈

如有问题或建议，请通过以下方式反馈：
- 在使用过程中遇到错误，请检查文件路径和格式
- PDF文件无法解析时，请确认已安装 pypdf 或 PyPDF2

## 📄 更新日志

### v2.0 (当前版本)
- ✅ 合并了两个原始脚本的所有功能
- ✅ 添加PDF文件支持
- ✅ 优化输出结构，更清晰美观
- ✅ 增加调试模式（-d 参数）
- ✅ 核心知识点默认显示100个（原20个）
- ✅ 调试模式显示前200个知识点详情（原10个）
- ✅ 改进重要程度识别算法
- ✅ 添加详细的命令行帮助

## 📜 许可证

本脚本为教育学习工具，仅供个人学习使用。